"use strict";(self.webpackChunklxm_web=self.webpackChunklxm_web||[]).push([[3189],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>d});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),m=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),h=m(a),d=i,u=h["".concat(l,".").concat(d)]||h[d]||c[d]||s;return a?n.createElement(u,r(r({ref:t},p),{},{components:a})):n.createElement(u,r({ref:t},p))}));function d(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=a.length,r=new Array(s);r[0]=h;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,r[1]=o;for(var m=2;m<s;m++)r[m]=a[m];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},5654:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>s,metadata:()=>o,toc:()=>m});var n=a(7462),i=(a(7294),a(3905));const s={sidebar_position:2},r="Estimating probabilities",o={unversionedId:"advanced/estimating-probs",id:"advanced/estimating-probs",title:"Estimating probabilities",description:"LinXmart uses a probabilistic linkage engine that requires a number of parameters for operation. A set of default parameter values are automatically created when a new Linkage Project is created. To maximise linkage quality, it may be necessary to modify these to best suit the data in question.",source:"@site/docs/advanced/estimating-probs.md",sourceDirName:"advanced",slug:"/advanced/estimating-probs",permalink:"/docs/advanced/estimating-probs",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Privacy-preserving record linkage",permalink:"/docs/advanced/privacy-preserving"},next:{title:"Tutorials",permalink:"/docs/category/tutorials"}},l={},m=[{value:"Ingesting data into LinXmart for estimating probabilities",id:"ingesting-data-into-linxmart-for-estimating-probabilities",level:2},{value:"Probability Estimation Jobs",id:"probability-estimation-jobs",level:2},{value:"Load Probability Calculation Request Job",id:"load-probability-calculation-request-job",level:4},{value:"Calculate Probabilities Job",id:"calculate-probabilities-job",level:4},{value:"Publish Prob Calcs Envelope",id:"publish-prob-calcs-envelope",level:4},{value:"Accessing and viewing results from the Probability Calculation process",id:"accessing-and-viewing-results-from-the-probability-calculation-process",level:2},{value:"Caveats and troubleshooting",id:"caveats-and-troubleshooting",level:2}],p={toc:m};function c(e){let{components:t,...s}=e;return(0,i.kt)("wrapper",(0,n.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"estimating-probabilities"},"Estimating probabilities"),(0,i.kt)("p",null,"LinXmart uses a probabilistic linkage engine that requires ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/matching-config#defining-matching-strategies"},"a number of parameters")," for operation. A set of default parameter values are automatically created when a new Linkage Project is created. To maximise linkage quality, it may be necessary to modify these to best suit the data in question. "),(0,i.kt)("p",null,"LinXmart provides a method to estimate Match (",(0,i.kt)("span",{parentName:"p",className:"math math-inline"},(0,i.kt)("span",{parentName:"span",className:"katex"},(0,i.kt)("span",{parentName:"span",className:"katex-mathml"},(0,i.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,i.kt)("semantics",{parentName:"math"},(0,i.kt)("mrow",{parentName:"semantics"},(0,i.kt)("mi",{parentName:"mrow"},"m")),(0,i.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"m")))),(0,i.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,i.kt)("span",{parentName:"span",className:"mord mathnormal"},"m"))))),") and Non-Match (",(0,i.kt)("span",{parentName:"p",className:"math math-inline"},(0,i.kt)("span",{parentName:"span",className:"katex"},(0,i.kt)("span",{parentName:"span",className:"katex-mathml"},(0,i.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,i.kt)("semantics",{parentName:"math"},(0,i.kt)("mrow",{parentName:"semantics"},(0,i.kt)("mi",{parentName:"mrow"},"u")),(0,i.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"u")))),(0,i.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,i.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"))))),") probabilities, as well as the overall threshold, for a particular linkage. This method uses the ",(0,i.kt)("em",{parentName:"p"},"Expectation-Maximisation")," algorithm to estimate these values.  "),(0,i.kt)("p",null,"Values are estimated for a particular linkage; that is, for an incoming dataset being both de-duplicated and linked to all other datasets already in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/concepts/linkage-projects"},"Linkage Project"),". Both the incoming and pre-existing datasets are included in the analysis to determine the estimated values. "),(0,i.kt)("p",null,"A LinXmart operator carries out this estimation process by loading a ",(0,i.kt)("em",{parentName:"p"},"Probability Estimation")," ",(0,i.kt)("a",{parentName:"p",href:"/docs/concepts/envelopes"},"Envelope")," to the system. The data for linkage must be ingested into the system to carry out this estimation \u2013 however it is not linked or maintained within the system. The probability estimation process results in estimated probabilities published and downloadable through the web UI. The LinXmart operator can then update the appropriate ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/matching-config"},"match configuration")," with these probabilities as appropriate, and then load the same data file, this time for linkage."),(0,i.kt)("h2",{id:"ingesting-data-into-linxmart-for-estimating-probabilities"},"Ingesting data into LinXmart for estimating probabilities"),(0,i.kt)("p",null,"Probability estimation Envelopes can be created using the LinXmart Simple Envelope Builder. The output of the Build must be set to ",(0,i.kt)("em",{parentName:"p"},"Probability Estimation"),". Once created, the Envelope can be loaded into LinXmart using the ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/loading-data/loading-envelope"},"standard Envelope ingestion method"),". The system will know how to treat the ",(0,i.kt)("a",{parentName:"p",href:"/docs/concepts/envelopes"},"Envelope")," based on request type defined in the Envelope's manifest. "),(0,i.kt)("h2",{id:"probability-estimation-jobs"},"Probability Estimation Jobs"),(0,i.kt)("p",null,"After performing the usual validation checks (that the ",(0,i.kt)("a",{parentName:"p",href:"/docs/concepts/linkage-projects"},"Linkage Project")," and ",(0,i.kt)("a",{parentName:"p",href:"/docs/concepts/event-types"},"Event Type")," exist, and the Event Type is attached to the Linkage Project), the ",(0,i.kt)("em",{parentName:"p"},"Load Probability Calculation Request")," job begins. "),(0,i.kt)("h4",{id:"load-probability-calculation-request-job"},"Load Probability Calculation Request Job"),(0,i.kt)("p",null,"This job parses the data file, and loads valid records into the database. "),(0,i.kt)("p",null,"The parsing that occurs here is the same that occurs ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/record-linkage#load-linkage-request"},"with a Load Linkage Request"),". If the number of records which fail parsing is greater than 5% of the total, the entire datafile is rejected and marked as failed. "),(0,i.kt)("h4",{id:"calculate-probabilities-job"},"Calculate Probabilities Job"),(0,i.kt)("p",null,"This job runs the Expectation-Maximisation (EM) algorithm. This process can be time consuming depending on the size of the data involved. The algorithm itself is iterative; that is, it runs repeatedly, stopping only when it cannot improve the estimates further. "),(0,i.kt)("h4",{id:"publish-prob-calcs-envelope"},"Publish Prob Calcs Envelope"),(0,i.kt)("p",null,"This job publishes the results of the EM process to an Envelope, available to download from the Linkage Project."),(0,i.kt)("h2",{id:"accessing-and-viewing-results-from-the-probability-calculation-process"},"Accessing and viewing results from the Probability Calculation process"),(0,i.kt)("p",null,"Once the ",(0,i.kt)("em",{parentName:"p"},"Publish Prob Calcs Envelope")," job is completed, the results are downloadable from the web UI. To access these results, go the Project Details page for the Linkage Project in question. On this page, the Probability Estimation pane lists all probability estimation envelopes in the system for that Linkage Project. The estimated correct proportion of matches and threshold score is shown, with further results downloadable by clicking the download icon in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Options")," column.  "),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Probability Estimation List",src:a(2416).Z,width:"1397",height:"266"})),(0,i.kt)("p",null,"The name of the downloaded zip file contains the code of the Linkage Project, the number of the probability estimation request received by the system, and the datetime stamp of occurrence. E.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"ProbsCalc_APB1_34_20180901030633.zip"),"."),(0,i.kt)("p",null,"This downloaded zip file contains a number of files that have detailed information regarding the EM process."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"File"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"manifest.xml"),(0,i.kt)("td",{parentName:"tr",align:null},"The manifest file provides metadata information, outlining that this envelope contains the results of a Probability Estimation request, lists the Linkage Project to which it refers, and lists the other files contained in the envelope.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"data-summary.txt"),(0,i.kt)("td",{parentName:"tr",align:null},'This file contains basic summary information on the parameters of the Probability Estimation job, including the number of records and the blocking strategy used. It also contains results of the EM algorithm, including the estimated number and proportion of true matches, and the estimated best threshold choice ("Threshold with highest F-measure (Nlog)").')),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"data-fields.csv"),(0,i.kt)("td",{parentName:"tr",align:null},"Contains information for each field in linkage, including most importantly, the estimated Match and Non-Match Probabilities for each field.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"data-fieldcombos.csv"),(0,i.kt)("td",{parentName:"tr",align:null},"Contains information on the inner workings of the EM algorithm.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"data-thresholds-nlog.csv"),(0,i.kt)("td",{parentName:"tr",align:null},"Contain information on the estimated linkage quality found for a range of threshold settings using Natural log for weights.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"data-thresholds-log2.csv"),(0,i.kt)("td",{parentName:"tr",align:null},"Contain information on the estimated linkage quality found for a range of threshold settings using Log base 2 for weights.")))),(0,i.kt)("p",null,"The weights found through the Probability Estimation process (located in the ",(0,i.kt)("inlineCode",{parentName:"p"},"data-fields.csv")," file) for each field can be used by manually entering them through the ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/matching-config"},"match configuration process"),"."),(0,i.kt)("h2",{id:"caveats-and-troubleshooting"},"Caveats and troubleshooting"),(0,i.kt)("p",null,"Whilst the weight estimation method is a useful technique to estimate ",(0,i.kt)("span",{parentName:"p",className:"math math-inline"},(0,i.kt)("span",{parentName:"span",className:"katex"},(0,i.kt)("span",{parentName:"span",className:"katex-mathml"},(0,i.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,i.kt)("semantics",{parentName:"math"},(0,i.kt)("mrow",{parentName:"semantics"},(0,i.kt)("mi",{parentName:"mrow"},"m")),(0,i.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"m")))),(0,i.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,i.kt)("span",{parentName:"span",className:"mord mathnormal"},"m")))))," and ",(0,i.kt)("span",{parentName:"p",className:"math math-inline"},(0,i.kt)("span",{parentName:"span",className:"katex"},(0,i.kt)("span",{parentName:"span",className:"katex-mathml"},(0,i.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,i.kt)("semantics",{parentName:"math"},(0,i.kt)("mrow",{parentName:"semantics"},(0,i.kt)("mi",{parentName:"mrow"},"u")),(0,i.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"u")))),(0,i.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,i.kt)("span",{parentName:"span",className:"mord mathnormal"},"u")))))," probabilities, it also needs to be used with care."),(0,i.kt)("p",null,"Firstly, the EM algorithm is not guaranteed to successfully return accurate results in all cases. It works best on administrative datasets with many matches between records. Too few matches and it will fail to produce usable results. The algorithm also cannot tell whether it has succeeded or not. If it has not, then using its estimated weights in linkage will result in poor accuracy. "),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"It is important the Operator recognizes when the returned results look suspect. Generally, ",(0,i.kt)("span",{parentName:"p",className:"math math-inline"},(0,i.kt)("span",{parentName:"span",className:"katex"},(0,i.kt)("span",{parentName:"span",className:"katex-mathml"},(0,i.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,i.kt)("semantics",{parentName:"math"},(0,i.kt)("mrow",{parentName:"semantics"},(0,i.kt)("mi",{parentName:"mrow"},"m")),(0,i.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"m")))),(0,i.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,i.kt)("span",{parentName:"span",className:"mord mathnormal"},"m")))))," probabilities should be in the range of 0.8 to 1.0 for most fields in a dataset. If the results of the EM algorithm suggest ",(0,i.kt)("span",{parentName:"p",className:"math math-inline"},(0,i.kt)("span",{parentName:"span",className:"katex"},(0,i.kt)("span",{parentName:"span",className:"katex-mathml"},(0,i.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,i.kt)("semantics",{parentName:"math"},(0,i.kt)("mrow",{parentName:"semantics"},(0,i.kt)("mi",{parentName:"mrow"},"m")),(0,i.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"m")))),(0,i.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,i.kt)("span",{parentName:"span",className:"mord mathnormal"},"m")))))," probabilities well below that range, then it is likely these results are not useful. There is suggestion in the literature that tighter blocks (that is, changing the blocking values so that less comparisons overall are performed) may resolve this problem.   ")),(0,i.kt)("p",null,"A second issue is performance. The EM algorithm may perform slowly, more-so as dataset sizes increase. Editing the ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/matching-config"},"match configuration")," for the Linkage Project to change the blocking values so that less comparisons are performed, should reduce the time required for the EM algorithm."))}c.isMDXComponent=!0},2416:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/probability-estimation-list-5948048c73ecb05bc89997c9a73d160f.png"}}]);